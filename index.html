<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CivilQuickCalc</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>

body{
font-family:Arial;
max-width:900px;
margin:auto;
padding:20px;
}

h2{
margin-top:40px;
}

input,select,button{
width:100%;
padding:10px;
margin:6px 0;
font-size:16px;
}

button{
background:#1f4e79;
color:white;
border:none;
cursor:pointer;
}

.result{
background:#f4f4f4;
padding:12px;
margin-top:10px;
}

table{
width:100%;
border-collapse:collapse;
margin-top:10px;
}

td,th{
border:1px solid #ccc;
padding:8px;
text-align:center;
}

</style>
</head>

<body>

<h1 style="text-align:center">CivilQuickCalc</h1>

<p>
Preliminary engineering calculator. Not for final structural design approval.
</p>

<hr>

<!-- ================= CONCRETE ================= -->

<h2>Concrete Volume Calculator</h2>

<select id="shape">
<option value="rect">Rectangular</option>
<option value="circular">Circular Column</option>
</select>

<input id="length" placeholder="Length / Height">
<select id="lengthUnit">
<option value="m">m</option>
<option value="mm">mm</option>
<option value="ft">ft</option>
</select>

<input id="width" placeholder="Width / Diameter">
<select id="widthUnit">
<option value="m">m</option>
<option value="mm">mm</option>
<option value="ft">ft</option>
</select>

<input id="thickness" placeholder="Thickness (Rectangular Only)">
<select id="thicknessUnit">
<option value="m">m</option>
<option value="mm">mm</option>
<option value="ft">ft</option>
</select>

<select id="wastage">
<option value="0">No Wastage</option>
<option value="5">+5% Wastage</option>
<option value="10">+10% Wastage</option>
</select>

<button onclick="calcConcrete()">Calculate Concrete</button>

<div id="concreteResult" class="result"></div>

<!-- ================= MOMENT & SHEAR ================= -->

<h2>Moment & Shear (UDL Beam)</h2>

<input id="spanM" placeholder="Span L (m)">
<input id="loadM" placeholder="UDL Load w (kN/m)">

<button onclick="calcMoment()">Calculate</button>

<div id="momentResult" class="result"></div>

<!-- ================= FOOTING ================= -->

<h2>Footing Design</h2>

<input id="axialLoad" placeholder="Axial Load (kN)">
<input id="soilBearing" placeholder="Soil Bearing Capacity (kPa)">

<button onclick="calcFooting()">Design Footing</button>

<div id="footingResult" class="result"></div>

<!-- ================= STEEL ================= -->

<h2>Steel Schedule</h2>

<input id="steelDia" placeholder="Bar Diameter (mm)">
<input id="steelLen" placeholder="Length (m)">
<input id="steelQty" placeholder="Quantity">

<button onclick="addSteel()">Add Steel</button>

<table id="steelTable">
<tr>
<th>Dia</th>
<th>Length</th>
<th>Qty</th>
<th>Weight (kg)</th>
</tr>
</table>

<!-- ================= PDF ================= -->

<h2>Report Export</h2>

<button onclick="exportPDF()">Download PDF Report</button>

<script>

/* UNIT CONVERSION */
function toMeters(v,u){
v=parseFloat(v);
if(isNaN(v)) return NaN;

if(u==="mm") return v/1000;
if(u==="ft") return v*0.3048;
return v;
}

/* CONCRETE */
function calcConcrete(){

let shape=document.getElementById("shape").value;

let L=toMeters(length.value,lengthUnit.value);
let W=toMeters(width.value,widthUnit.value);
let T=toMeters(thickness.value,thicknessUnit.value);

if(isNaN(L)||isNaN(W)){
concreteResult.innerHTML="Enter valid dimensions";
return;
}

let V;

if(shape==="rect"){
if(isNaN(T)){
concreteResult.innerHTML="Enter thickness";
return;
}
V=L*W*T;
}
else{
V=Math.PI*Math.pow(W/2,2)*L;
}

let finalV=V*(1+parseFloat(wastage.value)/100);

concreteResult.innerHTML=
"Concrete Volume = "+V.toFixed(3)+" m³<br>"+
"With Wastage = "+finalV.toFixed(3)+" m³";
}

/* MOMENT & SHEAR */
function calcMoment(){

let L=parseFloat(spanM.value);
let w=parseFloat(loadM.value);

if(isNaN(L)||isNaN(w)) return;

let M=(w*Math.pow(L,2))/8;
let V=(w*L)/2;

momentResult.innerHTML=
"Max Moment = "+M.toFixed(2)+" kNm<br>"+
"Max Shear = "+V.toFixed(2)+" kN";
}

/* FOOTING */
function calcFooting(){

let P=parseFloat(axialLoad.value);
let q=parseFloat(soilBearing.value);

if(isNaN(P)||isNaN(q)) return;

let A=(P*1.1)/q;
let side=Math.sqrt(A);

footingResult.innerHTML=
"Footing Area = "+A.toFixed(2)+" m²<br>"+
"Suggested Square Footing = "+
side.toFixed(2)+" m × "+side.toFixed(2)+" m";
}

/* STEEL TABLE */
function addSteel(){

let d=parseFloat(steelDia.value);
let L=parseFloat(steelLen.value);
let q=parseFloat(steelQty.value);

if(isNaN(d)||isNaN(L)||isNaN(q)) return;

let weight=(d*d/162)*L*q;

document.getElementById("steelTable").innerHTML+=
`<tr>
<td>${d}</td>
<td>${L}</td>
<td>${q}</td>
<td>${weight.toFixed(2)}</td>
</tr>`;
}

/* PDF EXPORT */
function exportPDF(){

const { jsPDF } = window.jspdf;
let doc=new jsPDF();

doc.text("CivilQuickCalc Report",10,10);

doc.text(concreteResult.innerText,10,30);
doc.text(momentResult.innerText,10,60);
doc.text(footingResult.innerText,10,90);

doc.save("CivilQuickCalc_Report.pdf");
}

</script>

</body>
</html>
